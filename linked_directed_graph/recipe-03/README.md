### 检测有向图中是否存在闭环 

要检测有向图中是否存在闭环，可以使用如下算法。

1. 选择任意一个节点（类型）并标注为“查找中”
2. 沿着边依次访问所有与该节点相邻的节点
3. 如果访问到的节点没有标注任何状态，则将该节点标注为“查找中”；
   如果标注了“查找结束”，则不做任何处理，返回之前的节点；
   如果已经标注为“查找中”，则说明存在闭环
4. 从当前的节点重复步骤 2 和 3，如果已经没有可访问的相邻节点，
   则将该节点标注为“查找结束”，并沿原路返回
5. 按照上述流程对所有节点进行处理，如果查找过程中没有遇到“查找中”状态的节点，就说明不存在闭环

上述算法中使用了“有向图的深度优先检索”来检测闭环。
简单地说，该算法的概要就是“只要节点有未访问的相邻节点就试着访问，调查是否会回到原来的节点”。
从算法执行过程中的某一时刻来看，就是在为从起始节点到某一节点的路径上的所有节点标注上“查找中”的状态。


### 参考文档

- 《自制编译器 青木峰郎著》：10.1 检测有向图中的闭环的算法
